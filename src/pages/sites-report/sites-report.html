<!--
  Generated template for the SitesReportPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
	<ion-navbar>
		<ion-title *ngIf="site && site.title; else noSite">{{'sites-report.header' | translate:{name: site.title} }}</ion-title>
		<ng-template #noSite>
			<ion-title>{{"Full Reporting" | translate}}</ion-title>
		</ng-template>
	</ion-navbar>
</ion-header>

<ion-content padding>
		<report-header [raws]="rep"></report-header>
		<div class="date-picker" *ngIf="rangeFilter">
			<ion-item>
				<div item-right>
					<ion-icon name="calendar"></ion-icon>
					<span (click)="openCalendar()">{{'Custom period' | translate}}</span> 
					| <button (click)="last7days()">{{'Last 7 days' | translate}}</button>
					| <button (click)="last30days()">{{'Last 30 days' | translate}}</button>
					| <button (click)="lastMonth()">{{'Last month' | translate}}</button>
					| <button (click)="currentMonth()">{{'Current month' | translate}}</button>
				</div>
			</ion-item>
			<div class="range">
				<small>{{rangeFilter.startAt | amDateFormat:'MMMM D'}} - {{rangeFilter.endAt| amDateFormat:'LL'}}</small>
			</div>
		</div>

	<section *ngIf="rep; else noData">
		<report-table [rows]="rep['Premium']" *ngIf="rep['Premium']" title="Premium"></report-table>
		<report-table [rows]="rep['AMS Market Place']" *ngIf="rep['AMS Market Place']" title="AMS Market Place"></report-table>
		<report-table [rows]="rep['AdNetwork Fill']" *ngIf="rep['AdNetwork Fill']" title="AdNetwork Fill"></report-table>
	</section>
	<ng-template #noData>
		
	</ng-template>

	<!--ion-list>
			<p-dataTable [value]="rep" sortField="inventaire" rowGroupMode="subheader" groupField="inventaire" expandableRowGroups="true"
					[sortableRowGroup]="false">
			<p-header>Toggleable Row Groups with Footers</p-header>
			<ng-template pTemplate="rowgroupheader" let-rowData>{{rowData['inventaire']}}</ng-template>
				<p-column field="date" header="Date"></p-column>
				<p-column field="inventaire" header="Inventaire"></p-column>
				<p-column field="site" header="Site"></p-column>
				<p-column field="fillRate" header="Fill Rate"></p-column>
				<p-column field="impressions prises" header="Impr. prises"></p-column>
				<p-column field="impressions envoyees" header="Impr. envoyÃ©es"></p-column>
				<p-column field="revenu" header="Revenu">
					<ng-template let-col let-car="rowData" pTemplate="body">
							<span>{{car[col.field] | currency:'USD':true:'.0-0'}}</span>
					</ng-template>
			</p-column>
			<ng-template pTemplate="rowgroupfooter" let-car>
					<td colspan="4" style="text-align:right">Total Revenu</td>
					<td>{{calculateGroupTotal(car['inventaire'], "impressions prises")}}</td>
					<td>{{calculateGroupTotal(car['inventaire'], "revenu") | currency:'USD':true:'.0-0' }}</td>
			</ng-template>
			</p-dataTable>
		</ion-list-->

	<!--ion-list>
		<ion-item>
			<ion-label>Start Date</ion-label>
			<ion-datetime displayFormat="DD/MM/YYYY" min="2017" max="2017-06-30" pickerFormat="DD MMMM YYYY" [(ngModel)]="startDate"></ion-datetime>
		</ion-item>
		<ion-item>
			<ion-label>End Date</ion-label>
			<ion-datetime displayFormat="DD/MM/YYYY" pickerFormat="DD MMMM YYYY" [(ngModel)]="endDate"></ion-datetime>
		</ion-item>
	</ion-list>
	<button ion-button full>Apply</button-->
</ion-content>