{"version":3,"sources":["../../src/pages/sites-list/sites-list.module.ts","webpack:///./src/providers/index.ts?ff89***","webpack:///./src/providers/auth/auth.ts?1280***","../../src/pages/sites-list/sites-list.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACH;AAEI;AAcjD,IAAa,mBAAmB;IAAhC;IAAkC,CAAC;IAAD,0BAAC;AAAD,CAAC;AAAtB,mBAAmB;IAZ/B,8EAAQ,CAAC;QACR,YAAY,EAAE;YACZ,kEAAa;SACd;QACD,OAAO,EAAE;YACP,uEAAiB;YACjB,sEAAe,CAAC,QAAQ,CAAC,kEAAa,CAAC;SACxC;QACD,OAAO,EAAE;YACP,kEAAa;SACd;KACF,CAAC;GACW,mBAAmB,CAAG;AAAH;;;;;;;;;;;;;;;;;AClBJ;AACA;AACE;AACE;;;;;;;;;;;;;;;;;;;;;;;ACHW;AACZ;AACqB;AAKpD,IAAa,YAAY;IAEvB,sBAAoB,OAAwB;QAAxB,YAAO,GAAP,OAAO,CAAiB;QAC1C,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;IAC7C,CAAC;IAED,mCAAY,GAAZ,UAAa,IAAW;QACtB,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,8BAA8B,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IACrF,CAAC;IAEH,mBAAC;AAAD,CAAC;AAVY,YAAY;IADxB,gFAAU,EAAE;yDAGkB,0EAAe,oBAAf,0EAAe;GAFjC,YAAY,CAUxB;AAVwB;;;;;;;;;;;;;;;;;;;;;;;ACPiB;AACmF;AAE7D;AAWhE,IAAa,aAAa;IAKxB,uBACS,YAA2B,EAC3B,aAA6B,EAC7B,OAAsB,EACtB,SAA0B,EAC1B,SAA0B,EAC1B,eAAsC,EACtC,SAAoB;QAP7B,iBAmBC;QAlBQ,iBAAY,GAAZ,YAAY,CAAe;QAC3B,kBAAa,GAAb,aAAa,CAAgB;QAC7B,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAiB;QAC1B,oBAAe,GAAf,eAAe,CAAuB;QACtC,cAAS,GAAT,SAAS,CAAW;QAE3B,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC;QAE7C,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QAC5B,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE;iBACzB,SAAS,CAAC,cAAI;gBACb,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YACpB,CAAC,CAAC,CAAC;QACP,CAAC;IACH,CAAC;IAED,iCAAS,GAAT,UAAU,QAAQ;QAAlB,iBAKC;QAJC,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,QAAQ,CAAC;aACxC,SAAS,CAAC,cAAI;YACb,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QACpB,CAAC,CAAC;IACN,CAAC;IAED,kCAAU,GAAV,UAAW,QAAQ;QAAnB,iBAOC;QANC,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,QAAQ,CAAC;aACjC,SAAS,CAAE,cAAI;YACd,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAC9B,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACnC,CAAC,CAAC;IACR,CAAC;IAED,sCAAc,GAAd,UAAe,IAAW;QACxB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE;YAChC,IAAI,EAAE,IAAI,CAAC,IAAI;SAChB,CAAC;IACJ,CAAC;IAED,kCAAU,GAAV,UAAW,MAAM,EAAE,IAAW;QAC5B,MAAM,CAAC,eAAe,EAAE,CAAC;QACzB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE;YAChC,IAAI,EAAE,IAAI,CAAC,IAAI;SAChB,CAAC;IACJ,CAAC;IAED,kCAAU,GAAV,UAAW,MAAM,EAAE,IAAW;QAA9B,iBA0BC;QAzBC,MAAM,CAAC,eAAe,EAAE,CAAC;QACzB,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,kBAAkB;YACzB,OAAO,EAAE,kCAAkC;YAC3C,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAChC,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACP,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;6BAChC,IAAI,CAAC,WAAC;4BACL,KAAI,CAAC,YAAY,CAAC,2BAA2B,CAAC,CAAC;wBACjD,CAAC,CAAC;6BACD,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,EAAE,yBAAyB,CAAC,EAA3C,CAA2C,CAAC,CAAC;oBAC/D,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,mCAAW,GAAX,UAAY,GAAG,IAAI,MAAM,CAAC,OAAO,GAAG,KAAK,WAAW,CAAC,CAAC,CAAC;IAEvD,+BAAO,GAAP,UAAQ,QAAgB;QAAxB,iBAgCC;QA/BC,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YACjC,KAAK,EAAE,WAAW;YAClB,OAAO,EAAE,yDAAyD;YAClE,MAAM,EAAE;gBACN;oBACE,IAAI,EAAE,MAAM;oBACZ,WAAW,EAAE,MAAM;iBACpB;aACF;YACD,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE,cAAI;wBACX,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAChC,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,MAAM;oBACZ,OAAO,EAAE,cAAI;wBACX,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC;6BAC5C,IAAI,CAAC,UAAC,IAAI;4BACT,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE;gCAChC,IAAI,EAAE,IAAI,CAAC,GAAG;6BACf,CAAC;wBACJ,CAAC,CAAC;6BACD,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,EAAE,qBAAqB,CAAC,EAAvC,CAAuC,CAAC,CAAC;oBACzD,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,gCAAQ,GAAR,UAAS,MAAM,EAAE,IAAW;QAC1B,MAAM,CAAC,eAAe,EAAE,CAAC;QACzB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACxB,CAAC;IAED,oCAAY,GAAZ,UAAa,GAAW;QACtB,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,OAAO,EAAE,GAAG;YACZ,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,QAAQ;SACnB,CAAC,CAAC;QAEH,KAAK,CAAC,YAAY,CAAC;YACjB,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IACH,oBAAC;AAAD,CAAC;AAzIY,aAAa;IARzB,uFAAS,CAAC;QACP,IAAI,EAAE,YAAY;QAClB,OAAO,EAAE,OAAO;KACnB,CAAC;IACD,+EAAS,CAAC;QACT,QAAQ,EAAE,iBAAiB;OACG;KAC/B,CAAC;2EAOoC;QACZ,qEAAc;QACpB,sEAAa;QACX,sEAAe;QACf,4EAAe;QACT,kEAAqB;QAC3B,SAAS;AA6H9B;SAzIY,aAAa,gB","file":"4.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SitesListPage } from './sites-list';\n\nimport { AngularFireModule } from 'angularfire2';\n\n@NgModule({\n  declarations: [\n    SitesListPage,\n  ],\n  imports: [\n    AngularFireModule,\n    IonicPageModule.forChild(SitesListPage),\n  ],\n  exports: [\n    SitesListPage\n  ]\n})\nexport class SitesListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sites-list/sites-list.module.ts","export * from './user/user';\nexport * from './auth/auth';\nexport * from './sites/sites';\nexport * from './editor/editor';\n\n\n// WEBPACK FOOTER //\n// ./src/providers/index.ts","import { Injectable } from '@angular/core';\nimport 'rxjs/add/operator/map';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { IUser } from '../../models';\n\n\n@Injectable()\nexport class AuthProvider {\n\n  constructor(private af2Auth: AngularFireAuth) {\n    console.log('Hello AuthProvider Provider');\n  }\n\n  registerUser(user: IUser) {\n    return this.af2Auth.auth.createUserWithEmailAndPassword(user.email, user.password);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth/auth.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, AlertController, ActionSheetController, ToastController, NavParams } from 'ionic-angular';\n\nimport { SitesProvider, EditorProvider } from '../../providers';\nimport { ISite, IEditor } from '../../models';\n\n@IonicPage({\n    name: 'sites-list',\n    segment: 'sites'\n})\n@Component({\n  selector: 'page-sites-list',\n  templateUrl: 'sites-list.html',\n})\nexport class SitesListPage {\n\n  sites: ISite[];\n  editor: IEditor;\n\n  constructor(\n    public sitesService: SitesProvider,\n    public editorService: EditorProvider,\n    public navCtrl: NavController,\n    public alertCtrl: AlertController,\n    public toastCtrl: ToastController,\n    public actionSheetCtrl: ActionSheetController,\n    public navParams: NavParams\n  ) {\n    let editorId = this.navParams.data.editor_id;\n\n    if (editorId) {\n      this.loadEditor(editorId);\n    } else {\n      this.sitesService.fetchAll()\n        .subscribe(data => {\n          this.sites = data;\n        });\n    }    \n  }\n\n  loadSites(editorId) {\n    this.sitesService.fetchByEditorId(editorId)\n      .subscribe(data => {\n        this.sites = data;\n      })\n  }\n\n  loadEditor(editorId) {\n    this.editorService.fetchById(editorId)\n        .subscribe( data => {\n          this.editor = data;\n          console.log(this.editor.name);\n          this.loadSites(this.editor.$key);\n        })\n  }\n\n  openSiteReport(site: ISite) {\n    this.navCtrl.push('sites-report', {\n      'id': site.$key\n    })\n  }\n\n  updateSite($event, site: ISite) {\n    $event.stopPropagation();\n    this.navCtrl.push('site-details', {\n      'id': site.$key\n    })\n  }\n\n  removeSite($event, site: ISite) {\n    $event.stopPropagation();\n    let alert = this.alertCtrl.create({\n      title: 'Confirm deletion',\n      message: 'Do you want to remove this site?',\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Remove',\n          handler: () => {\n            this.sitesService.delete(site.$key)\n              .then(_ => {\n                this.presentToast('Site removed successfully');\n              })\n              .catch(err => console.log(err, 'You do not have access!'));\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  isUndefined(val) { return typeof val === 'undefined'; }\n\n  addSite(editorId: string) {\n    let prompt = this.alertCtrl.create({\n      title: 'Site Name',\n      message: \"Enter a name for this new site you're so keen on adding\",\n      inputs: [\n        {\n          name: 'name',\n          placeholder: 'Name'\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Save',\n          handler: data => {\n            this.sitesService.create(data.name, editorId)\n            .then((site) => {\n              this.navCtrl.push('site-details', {\n                'id': site.key\n              })\n            })\n            .catch(err => console.log(err, 'Can\\'t create Site!'));\n          }\n        }\n      ]\n    });\n    prompt.present();\n  }\n\n  openSite($event, site: ISite) {\n    $event.stopPropagation();\n    window.open(site.url);\n  }\n\n  presentToast(msg: string) {\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 3000,\n      position: 'bottom'\n    });\n\n    toast.onDidDismiss(() => {\n      console.log('Dismissed toast');\n    });\n\n    toast.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sites-list/sites-list.ts"],"sourceRoot":""}